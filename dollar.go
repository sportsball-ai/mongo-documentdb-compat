package mongodocumentdbcompat

import (
	"encoding/csv"
	"strings"
)

const dollarCSV = `
Command,3.6,4.4
$all,Yes,Yes
$elemMatch,Yes,Yes
$size,Yes,Yes
$bitsAllSet,Yes,Yes
$bitsAnySet,Yes,Yes
$bitsAllClear,Yes,Yes
$bitsAnyClear,Yes,Yes
$comment,Yes,Yes
$eq,Yes,Yes
$gt,Yes,Yes
$gte,Yes,Yes
$lt,Yes,Yes
$lte,Yes,Yes
$ne,Yes,Yes
$in,Yes,Yes
$nin,Yes,Yes
$exists,Yes,Yes
$type,Yes,Yes
$expr,No,No
$jsonSchema,No,No
$mod,Yes,Yes
$regex,Yes,Yes
$text,No,No
$where,No,No
$or,Yes,Yes
$and,Yes,Yes
$not,Yes,Yes
$nor,Yes,Yes
$,Yes,Yes
$elemMatch,Yes,Yes
$meta,No,No
$slice,Yes,Yes
$,Yes,Yes
$[],Yes,Yes
$[<identifier>],Yes,Yes
$addToSet,Yes,Yes
$pop,Yes,Yes
$pullAll,Yes,Yes
$pull,Yes,Yes
$push,Yes,Yes
$bit,Yes,Yes
$inc,Yes,Yes
$mul,Yes,Yes
$rename,Yes,Yes
$setOnInsert,Yes,Yes
$set,Yes,Yes
$unset,Yes,Yes
$min,Yes,Yes
$max,Yes,Yes
$currentDate,Yes,Yes
$each,Yes,Yes
$slice,Yes,Yes
$sort,Yes,Yes
$position,Yes,Yes
$box,No,No
$center,No,No
$centerSphere,No,No
$nearSphere,No,No
$geometry,No,No
$maxDistance,No,No
$minDistance,No,No
$polygon,No,No
$uniqueDocs,No,No
$geoIntersects,No,No
$geoWithin,No,No
$near,No,No
$nearSphere,No,No
$polygon,No,No
$uniqueDocs,No,No
$sum,Yes,Yes
$avg,Yes,Yes
$first,Yes,Yes
$last,Yes,Yes
$max,Yes,Yes
$min,Yes,Yes
$push,Yes,Yes
$addToSet,Yes,Yes
$stdDevPop,No,No
$stdDevSamp,No,No
$abs,Yes,Yes
$add,Yes,Yes
$ceil,No,No
$divide,Yes,Yes
$exp,No,No
$floor,No,No
$ln,No,No
$log,No,No
$log10,No,No
$mod,Yes,Yes
$multiply,Yes,Yes
$pow,No,No
$sqrt,No,No
$subtract,Yes,Yes
$trunc,No,No
$arrayElemAt,Yes,Yes
$arrayToObject,Yes,Yes
$concatArrays,Yes,Yes
$filter,Yes,Yes
$indexOfArray,No,No
$isArray,Yes,Yes
$objectToArray,Yes,Yes
$range,Yes,Yes
$reverseArray,No,No
$reduce,No,No
$size,Yes,Yes
$slice,Yes,Yes
$zip,No,No
$in,Yes,Yes
$and,Yes,Yes
$or,Yes,Yes
$not,Yes,Yes
$cmp,Yes,Yes
$eq,Yes,Yes
$gt,Yes,Yes
$gte,Yes,Yes
$lt,Yes,Yes
$lte,Yes,Yes
$ne,Yes,Yes
$cond,Yes,Yes
$ifNull,Yes,Yes
$switch,No,No
$type,No,No
$dayOfYear,Yes,Yes
$dayOfMonth,Yes,Yes
$dayOfWeek,Yes,Yes
$year,Yes,Yes
$month,Yes,Yes
$week,Yes,Yes
$hour,Yes,Yes
$minute,Yes,Yes
$second,Yes,Yes
$millisecond,Yes,Yes
$dateToString,Yes,Yes
$isoDayOfWeek,Yes,Yes
$isoWeek,Yes,Yes
$dateFromParts,No,No
$dateToParts,No,No
$dateFromString,Yes,Yes
$isoWeekYear,Yes,Yes
$literal,No,No
$mergeObjects,No,No
$natural,No,No
$setEquals,Yes,Yes
$setIntersection,Yes,Yes
$setUnion,Yes,Yes
$setDifference,No,No
$setIsSubset,Yes,Yes
$anyElementTrue,No,No
$allElementsTrue,No,No
$collStats,No,No
$project,Yes,Yes
$match,Yes,Yes
$redact,Yes,Yes
$limit,Yes,Yes
$skip,Yes,Yes
$unwind,Yes,Yes
$group,Yes,Yes
$sample,Yes,Yes
$sort,Yes,Yes
$geoNear,No,No
$lookup,Yes,Yes
$out,Yes,Yes
$indexStats,Yes,Yes
$facet,No,No
$bucket,No,No
$bucketAuto,No,No
$sortByCount,No,No
$addFields,Yes,No
$replaceRoot,Yes,Yes
$count,Yes,Yes
$currentOp,Yes,Yes
$listLocalSessions,No,No
$listSessions,No,No
$graphLookup,No,No
$concat,Yes,Yes
$indexOfBytes,Yes,Yes
$indexOfCP,Yes,Yes
$ltrim,No,No
$rtrim,No,No
$split,Yes,Yes
$strcasecmp,Yes,Yes
$strLenBytes,Yes,Yes
$strLenCP,Yes,Yes
$substr,Yes,Yes
$substrBytes,Yes,Yes
$substrCP,Yes,Yes
$toLower,Yes,Yes
$toUpper,Yes,Yes
$trim,No,No
$$CURRENT,No,No
$$DESCEND,Yes,Yes
$$KEEP,Yes,Yes
$$PRUNE,Yes,Yes
$$REMOVE,No,No
$$ROOT,No,No
$meta,No,No
$convert,No,No
$toBool,No,No
$toDate,No,No
$toDecimal,No,No
$toDouble,No,No
$toInt,No,No
$toLong,No,No
$toObjectId,No,No
$toString,No,No
$map,No,No
$let,No,No
`

var dollar map[string]map[string]bool

func init() {
	records, err := csv.NewReader(strings.NewReader(strings.TrimSpace(dollarCSV))).ReadAll()
	if err != nil {
		panic(err)
	}
	dollar = map[string]map[string]bool{}
	for _, version := range records[0][1:] {
		m := map[string]bool{}
		for _, record := range records[1:] {
			m[record[0]] = record[2] == "Yes"
		}
		dollar[version] = m
	}
}
